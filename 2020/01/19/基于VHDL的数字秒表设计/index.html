<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="基于VHDL的数字秒表设计"><meta name="keywords" content="HDL,FPGA,VHDL,数字秒表"><meta name="author" content="gzwang"><meta name="copyright" content="gzwang"><title>基于VHDL的数字秒表设计 | Rubina の blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E9%80%89%E9%A2%98%E5%8F%8A%E7%9B%AE%E6%A0%87"><span class="toc-number">1.</span> <span class="toc-text">实验选题及目标</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E9%80%89%E9%A2%98"><span class="toc-number">1.1.</span> <span class="toc-text">实验选题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E6%A0%87"><span class="toc-number">1.2.</span> <span class="toc-text">实验目标</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9"><span class="toc-number">2.</span> <span class="toc-text">实验内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B8%8E%E5%99%A8%E6%9D%90"><span class="toc-number">3.</span> <span class="toc-text">实验开发环境与器材</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%A3%E7%A0%81"><span class="toc-number">4.</span> <span class="toc-text">实验代码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#CB10-vhd"><span class="toc-number">4.1.</span> <span class="toc-text">CB10.vhd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CONTROL-vhd"><span class="toc-number">4.2.</span> <span class="toc-text">CONTROL.vhd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CDU10-vhd"><span class="toc-number">4.3.</span> <span class="toc-text">CDU10.vhd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CDU6-vhd"><span class="toc-number">4.4.</span> <span class="toc-text">CDU6.vhd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#COUNT-vhd"><span class="toc-number">4.5.</span> <span class="toc-text">COUNT.vhd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MUXL-vhd"><span class="toc-number">4.6.</span> <span class="toc-text">MUXL.vhd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BCD7-vhd"><span class="toc-number">4.7.</span> <span class="toc-text">BCD7.vhd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Stopwatch-vhd"><span class="toc-number">4.8.</span> <span class="toc-text">Stopwatch.vhd</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%B5%81%E7%A8%8B%E4%B8%8E%E6%AD%A5%E9%AA%A4"><span class="toc-number">5.</span> <span class="toc-text">实验流程与步骤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C%E4%B8%8E%E5%88%86%E6%9E%90"><span class="toc-number">6.</span> <span class="toc-text">实验结果与分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BD%93%E4%BC%9A"><span class="toc-number">7.</span> <span class="toc-text">实验体会</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%E5%BD%95-VERILOG"><span class="toc-number">8.</span> <span class="toc-text">附录(VERILOG)</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://gzwangu.github.io/img/avatar.jpg"></div><div class="author-info__name text-center">gzwang</div><div class="author-info__description text-center">Study and Life growth record</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">25</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">33</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">9</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://crownz.run/">crownZ</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://blog.zyuanlee.cn/">Pandalzy</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://blog.zguolee.cn/">Lee</a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Rubina の blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">基于VHDL的数字秒表设计</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-01-19</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AF%BE%E7%A8%8B%E5%AE%9E%E9%AA%8C/">课程实验</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">4.8k</span><span class="post-meta__separator">|</span><span>阅读时长: 21 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>当今社会正朝着电子市场发展，越来越多的电子产品应用于各个领域。数字秒表是日常生活中比较常见的电子产品，常用于体育比赛和时间计时，计时的精准性和稳定性是衡量数字秒表最重要的两个指标。现在市场上的数字秒表基本上都能满足计时准确的要求，但很少能满足计时稳定性的要求。本文设计了一种用于精确计时且计时稳定性高的数字秒表，该设计是在Quartus Ⅱ环境下，基于 VHDL语言来编写的，具有开关、计时和显示功能，其计时精度可达0.01s，计时范围较大，计时稳定性好。该设计具有很强的实用性，有着非常广泛的应用。</p>
<h1 id="实验选题及目标"><a href="#实验选题及目标" class="headerlink" title="实验选题及目标"></a>实验选题及目标</h1><h2 id="实验选题"><a href="#实验选题" class="headerlink" title="实验选题"></a>实验选题</h2><p>在科技高度发展的今天，集成电路和计算机应用得到了高速发展。尤其是计算机应用的发展，它在人们日常生活中已逐渐崭露头角，大多数电子产品多是有计算机电路组成，如：手机、mp3等。而且将来的不久他们的身影将会频繁的出现在我们身边，各种家用电器多会实现微电脑技术，电脑各部分在工作时多是一时间为基准的。</p>
<p>本文就是基于计算机电路的时钟脉冲信号、状态控制等原理设计出的数字秒表。秒表在很多领域充当一个重要角色，在各种比赛中对秒表的精确度要求很高，尤其是一些科学实验，他们对时间精确度达到了几纳秒级别。数字秒表具有操作方便、使用简单、计数精准等使用优点，在日常生活中的到了广泛认可和使用。</p>
<h2 id="实验目标"><a href="#实验目标" class="headerlink" title="实验目标"></a>实验目标</h2><p>设计一块数字秒表，能够精确反映计时时间，并完成复位、计时功能。秒表的计时范围为0秒~ 59分59.99秒，精度为0.01秒，并可显示计时时间的分、秒、毫秒等度量。</p>
<p>（1）具有秒表系统功能要求显示功能, 用8个数码管分别显示时、分、秒、毫秒，计时范围为00: 00： 00~ 59: 59：99。 </p>
<p>（2）数字秒表计时精度是0.01s。</p>
<p>（3）具有启/ 停开关, 复位开关，复位开关在任何情况下都能使用，使计实清零。</p>
<h1 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h1><p>根据系统设计要求, 系统的底层设计主要由控制模块、分频模块、计时模块、显示模块四部分组成。系统顶层设计图如图所示：</p>
<p>图中左边为三个输入信号CLK、CLR、SP分别为时钟信号、复位开关和启/ 停开关。主要模块有：分频模块（CB10），时间计数器(COUNT),复位控制(CONTROL)，数据选择模块(MULX),译码器(BCD7)。右边为五个输出信号LED、OUTBCD、SEG、CO、EN分别为七段式LED码值、输出时间值、数码管位选、分频信号和使能信号。</p>
<p>由模10计数器模块与模6计数器模块进行计数；实验室仪器可产生标准的50mHz的时钟信号，通过分频器模块产生所需的1kHz的时钟信号；复位模块可进行计数器复位操作；译码器是为了将四位二进制信号转换为LED所需的七位二进制编码；状态变换模块是为了用户按键后信号的变换及保持。</p>
<p><img src="RTL.png" alt="RTL图"></p>
<h1 id="实验开发环境与器材"><a href="#实验开发环境与器材" class="headerlink" title="实验开发环境与器材"></a>实验开发环境与器材</h1><p>Quartus Ⅱ 9.1和FPGA器件EP2C35F484C8</p>
<h1 id="实验代码"><a href="#实验代码" class="headerlink" title="实验代码"></a>实验代码</h1><h2 id="CB10-vhd"><a href="#CB10-vhd" class="headerlink" title="CB10.vhd"></a>CB10.vhd</h2><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_UNSIGNED.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> CB10 <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">PORT</span>(CLK : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>; </span><br><span class="line">		 CO : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC</span>);</span><br><span class="line"><span class="keyword">END</span> CB10;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> one <span class="keyword">OF</span> CB10 <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">SIGNAL</span> CNTER : <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">15</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">PROCESS</span>(CLK)</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">		<span class="keyword">IF</span>(RISING_EDGE(CLK)) <span class="keyword">THEN</span> </span><br><span class="line">			<span class="keyword">IF</span> CNTER = <span class="string">&quot;1100001101001111&quot;</span> <span class="keyword">THEN</span>   <span class="comment">--49999</span></span><br><span class="line">				CNTER&lt;=<span class="string">&quot;0000000000000000&quot;</span>;</span><br><span class="line">				CO&lt;=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">			<span class="keyword">ELSE</span></span><br><span class="line">				CNTER&lt;=CNTER+<span class="number">1</span>;</span><br><span class="line">				CO&lt;=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">			<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">		<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span> one;</span><br></pre></td></tr></table></figure>

<h2 id="CONTROL-vhd"><a href="#CONTROL-vhd" class="headerlink" title="CONTROL.vhd"></a>CONTROL.vhd</h2><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_UNSIGNED.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> CONTROL <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">PORT</span>(CLR,CLK,SP : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 EN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC</span>);</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> one <span class="keyword">OF</span> CONTROL <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">TYPE</span> STATES <span class="keyword">IS</span> (S0,S1,S2,S3);</span><br><span class="line">	<span class="keyword">SIGNAL</span> CURRENT_STATE,NEXT_STATE:STATES;</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">		COM:<span class="keyword">PROCESS</span>(SP,CURRENT_STATE)</span><br><span class="line">			<span class="keyword">BEGIN</span></span><br><span class="line">			<span class="keyword">CASE</span> CURRENT_STATE <span class="keyword">IS</span></span><br><span class="line">				<span class="keyword">WHEN</span> S0=&gt; EN&lt;=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">					<span class="keyword">IF</span> SP=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span> </span><br><span class="line">						NEXT_STATE&lt;=S1;</span><br><span class="line">					<span class="keyword">ELSE</span></span><br><span class="line">						NEXT_STATE&lt;=S0;</span><br><span class="line">					<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> S1=&gt; EN&lt;=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">					<span class="keyword">IF</span> SP=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span> </span><br><span class="line">						NEXT_STATE&lt;=S1;</span><br><span class="line">					<span class="keyword">ELSE</span></span><br><span class="line">						NEXT_STATE&lt;=S2;</span><br><span class="line">					<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> S2=&gt; EN&lt;=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">					<span class="keyword">IF</span> SP=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span> </span><br><span class="line">						NEXT_STATE&lt;=S3;</span><br><span class="line">					<span class="keyword">ELSE</span></span><br><span class="line">						NEXT_STATE&lt;=S2;</span><br><span class="line">					<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> S3=&gt; EN&lt;=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">					<span class="keyword">IF</span> SP=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span> </span><br><span class="line">						NEXT_STATE&lt;=S3;</span><br><span class="line">					<span class="keyword">ELSE</span></span><br><span class="line">						NEXT_STATE&lt;=S0;</span><br><span class="line">					<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">			<span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">		<span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line">		REG:<span class="keyword">PROCESS</span>(CLK)</span><br><span class="line">			<span class="keyword">BEGIN</span></span><br><span class="line">				<span class="keyword">IF</span> CLR=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">					CURRENT_STATE&lt;=S0;</span><br><span class="line">				<span class="keyword">ELSIF</span> CLK<span class="symbol">&#x27;EVENT</span> <span class="keyword">AND</span> CLK=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">					CURRENT_STATE&lt;=NEXT_STATE;</span><br><span class="line">				<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">			<span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h2 id="CDU10-vhd"><a href="#CDU10-vhd" class="headerlink" title="CDU10.vhd"></a>CDU10.vhd</h2><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_UNSIGNED.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> CDU10 <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">PORT</span>(CLK,CLR,EN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 CN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 COUNT10 : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line"><span class="keyword">END</span> CDU10;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> one <span class="keyword">OF</span> CDU10 <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">SIGNAL</span> SCOUNT10 : <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">	COUNT10&lt;=SCOUNT10;</span><br><span class="line">	<span class="keyword">PROCESS</span>(CLK,CLR,EN)</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">		<span class="keyword">IF</span> CLR=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">			SCOUNT10&lt;=<span class="string">&quot;0000&quot;</span>;</span><br><span class="line">			CN&lt;=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">		<span class="keyword">ELSIF</span> RISING_EDGE(CLK) <span class="keyword">THEN</span></span><br><span class="line">			<span class="keyword">IF</span> EN=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">				<span class="keyword">IF</span> SCOUNT10=<span class="string">&quot;1001&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">					CN&lt;=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">					SCOUNT10&lt;=<span class="string">&quot;0000&quot;</span>;</span><br><span class="line">				<span class="keyword">ELSE</span></span><br><span class="line">					CN&lt;=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">					SCOUNT10&lt;=SCOUNT10+<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">			<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">		<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h2 id="CDU6-vhd"><a href="#CDU6-vhd" class="headerlink" title="CDU6.vhd"></a>CDU6.vhd</h2><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_UNSIGNED.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> CDU6 <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">PORT</span>(CLK : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 CLR : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 EN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 CN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 COUNT6 : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line"><span class="keyword">END</span> CDU6;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> one <span class="keyword">OF</span> CDU6 <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">SIGNAL</span> SCOUNT6 : <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">	COUNT6&lt;=SCOUNT6;</span><br><span class="line">	<span class="keyword">PROCESS</span>(CLK,CLR,EN)</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">		<span class="keyword">IF</span> CLR=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">			SCOUNT6&lt;=<span class="string">&quot;0000&quot;</span>;</span><br><span class="line">			CN&lt;=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">		<span class="keyword">ELSIF</span> RISING_EDGE(CLK) <span class="keyword">THEN</span></span><br><span class="line">			<span class="keyword">IF</span> EN=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">				<span class="keyword">IF</span> SCOUNT6=<span class="string">&quot;0101&quot;</span> <span class="keyword">THEN</span> </span><br><span class="line">					CN&lt;=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">					SCOUNT6&lt;=<span class="string">&quot;0000&quot;</span>;</span><br><span class="line">				<span class="keyword">ELSE</span></span><br><span class="line">					CN&lt;=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">					SCOUNT6&lt;=SCOUNT6+<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">			<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">		<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h2 id="COUNT-vhd"><a href="#COUNT-vhd" class="headerlink" title="COUNT.vhd"></a>COUNT.vhd</h2><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> COUNT <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">PORT</span>(CLK,CLR,EN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 MS_1MS : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 MS_10MS : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 MS_100MS : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 S_1S : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 S_10S : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 M_1MIN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 M_10MIN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 HOUR : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> one <span class="keyword">OF</span> COUNT <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">COMPONENT</span> CDU10</span><br><span class="line">		<span class="keyword">PORT</span>(CLK,CLR,EN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">			 CN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">			 COUNT10 : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">COMPONENT</span> CDU10;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">COMPONENT</span> CDU6</span><br><span class="line">		<span class="keyword">PORT</span>(CLK,CLR,EN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">			 CN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">			 COUNT6 : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">COMPONENT</span> CDU6;</span><br><span class="line">	<span class="keyword">SIGNAL</span> A,B,C,D,E,F,G,H : <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">	U1:CDU10 <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;CLK,CLR=&gt;CLR,EN=&gt;EN,CN=&gt;A,COUNT10=&gt;MS_1MS);</span><br><span class="line">	U2:CDU10 <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;A,CLR=&gt;CLR,EN=&gt;EN,CN=&gt;B,COUNT10=&gt;MS_10MS);</span><br><span class="line">	U3:CDU10 <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;B,CLR=&gt;CLR,EN=&gt;EN,CN=&gt;C,COUNT10=&gt;MS_100MS);</span><br><span class="line">	U4:CDU10 <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;C,CLR=&gt;CLR,EN=&gt;EN,CN=&gt;D,COUNT10=&gt;S_1S);</span><br><span class="line">	U5:CDU6  <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;D,CLR=&gt;CLR,EN=&gt;EN,CN=&gt;E,COUNT6=&gt;S_10S);</span><br><span class="line">	U6:CDU10 <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;E,CLR=&gt;CLR,EN=&gt;EN,CN=&gt;F,COUNT10=&gt;M_1MIN);</span><br><span class="line">	U7:CDU6  <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;F,CLR=&gt;CLR,EN=&gt;EN,CN=&gt;G,COUNT6=&gt;M_10MIN);</span><br><span class="line">	U8:CDU10 <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;G,CLR=&gt;CLR,EN=&gt;EN,CN=&gt;H,COUNT10=&gt;HOUR);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h2 id="MUXL-vhd"><a href="#MUXL-vhd" class="headerlink" title="MUXL.vhd"></a>MUXL.vhd</h2><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_UNSIGNED.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> MULX <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">PORT</span>(CLK,CLR,EN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 MS_1MS : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 MS_10MS : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 MS_100MS : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 S_1S : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 S_10S : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 M_1MIN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 M_10MIN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 HOUR : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 OUTBCD : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 SEG : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">7</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> one <span class="keyword">OF</span> MULX <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">SIGNAL</span> COUNT:<span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">PROCESS</span>(CLK)</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">		<span class="keyword">IF</span> CLR = <span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">			COUNT&lt;=<span class="string">&quot;1111&quot;</span>;</span><br><span class="line">		<span class="keyword">ELSIF</span> RISING_EDGE(CLK) <span class="keyword">THEN</span></span><br><span class="line">			<span class="keyword">IF</span> EN=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">				<span class="keyword">IF</span> COUNT=<span class="string">&quot;0111&quot;</span> <span class="keyword">THEN</span></span><br><span class="line">					COUNT&lt;=<span class="string">&quot;0000&quot;</span>;</span><br><span class="line">				<span class="keyword">ELSE</span></span><br><span class="line">					COUNT&lt;=COUNT+<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">				<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">			<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">		<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">PROCESS</span>(CLK)</span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">		<span class="keyword">IF</span> CLK<span class="symbol">&#x27;EVENT</span> <span class="keyword">AND</span> CLK=<span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">			<span class="keyword">CASE</span> COUNT <span class="keyword">IS</span></span><br><span class="line">				<span class="keyword">WHEN</span> <span class="string">&quot;0000&quot;</span> =&gt; OUTBCD&lt;=MS_1MS; SEG&lt;=<span class="string">&quot;11111110&quot;</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> <span class="string">&quot;0001&quot;</span> =&gt; OUTBCD&lt;=MS_10MS; SEG&lt;=<span class="string">&quot;11111101&quot;</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> <span class="string">&quot;0010&quot;</span> =&gt; OUTBCD&lt;=MS_100MS; SEG&lt;=<span class="string">&quot;11111011&quot;</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> <span class="string">&quot;0011&quot;</span> =&gt; OUTBCD&lt;=S_1S; SEG&lt;=<span class="string">&quot;11110111&quot;</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> <span class="string">&quot;0100&quot;</span> =&gt; OUTBCD&lt;=S_10S; SEG&lt;=<span class="string">&quot;11101111&quot;</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> <span class="string">&quot;0101&quot;</span> =&gt; OUTBCD&lt;=M_1MIN; SEG&lt;=<span class="string">&quot;11011111&quot;</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> <span class="string">&quot;0110&quot;</span> =&gt; OUTBCD&lt;=M_10MIN; SEG&lt;=<span class="string">&quot;10111111&quot;</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> <span class="string">&quot;0111&quot;</span> =&gt; OUTBCD&lt;=HOUR; SEG&lt;=<span class="string">&quot;01111111&quot;</span>;</span><br><span class="line">				<span class="keyword">WHEN</span> <span class="keyword">OTHERS</span> =&gt; OUTBCD&lt;=<span class="string">&quot;0000&quot;</span>; SEG&lt;=<span class="string">&quot;00000000&quot;</span>;</span><br><span class="line">			<span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">		<span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">PROCESS</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h2 id="BCD7-vhd"><a href="#BCD7-vhd" class="headerlink" title="BCD7.vhd"></a>BCD7.vhd</h2><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_UNSIGNED.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> BCD7 <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">PORT</span>(BCD: <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 LED: <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">6</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> one <span class="keyword">OF</span> BCD7 <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">BEGIN</span> </span><br><span class="line">	LED &lt;= <span class="string">&quot;1111110&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;0000&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;0110000&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;0001&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;1101101&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;0010&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;1111001&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;0011&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;0110011&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;0100&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;1011011&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;0101&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;1011111&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;0110&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;1110000&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;0111&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;1111111&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;1000&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;1111011&quot;</span> <span class="keyword">WHEN</span> BCD =<span class="string">&quot;1001&quot;</span> <span class="keyword">ELSE</span></span><br><span class="line">		   <span class="string">&quot;0000000&quot;</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Stopwatch-vhd"><a href="#Stopwatch-vhd" class="headerlink" title="Stopwatch.vhd"></a>Stopwatch.vhd</h2><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LIBRARY</span> IEEE;</span><br><span class="line"><span class="keyword">USE</span> IEEE.STD_LOGIC_1164.<span class="keyword">ALL</span>;</span><br><span class="line"><span class="keyword">ENTITY</span> Stopwatch <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">PORT</span>(SP,CLR,CLK :<span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 CO,EN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 LED : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">6</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 OUTBCD : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">		 SEG : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">7</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="keyword">ARCHITECTURE</span> ONE <span class="keyword">OF</span> Stopwatch <span class="keyword">IS</span></span><br><span class="line">	<span class="keyword">COMPONENT</span> CONTROL </span><br><span class="line">	<span class="keyword">PORT</span>(CLR,CLK,SP : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 EN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC</span>);</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">COMPONENT</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">COMPONENT</span> CB10</span><br><span class="line">	<span class="keyword">PORT</span>(CLK : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">		 CO : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC</span>);</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">COMPONENT</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">COMPONENT</span> COUNT </span><br><span class="line">		<span class="keyword">PORT</span>(CLK,CLR,EN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">			 MS_1MS : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 MS_10MS : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 MS_100MS : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 S_1S : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 S_10S : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 M_1MIN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 M_10MIN : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 HOUR : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">COMPONENT</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">COMPONENT</span> BCD7</span><br><span class="line">		<span class="keyword">PORT</span>(BCD: <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 LED: <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">6</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">COMPONENT</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">COMPONENT</span> MULX</span><br><span class="line">		<span class="keyword">PORT</span>(CLK,CLR,EN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">			 MS_1MS : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 MS_10MS : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 MS_100MS : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 S_1S : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 S_10S : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 M_1MIN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 M_10MIN : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 HOUR : <span class="keyword">IN</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 OUTBCD : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">			 SEG : <span class="keyword">OUT</span> <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">7</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>));</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">COMPONENT</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">SIGNAL</span> C,E : <span class="built_in">STD_LOGIC</span>;</span><br><span class="line">	<span class="keyword">SIGNAL</span> MS1,MS10,MS100 : <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">SIGNAL</span> S1,S10 : <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);	 </span><br><span class="line">	<span class="keyword">SIGNAL</span> MIN1,MIN10 : <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);	  </span><br><span class="line">	<span class="keyword">SIGNAL</span> HR : <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);	    </span><br><span class="line">	<span class="keyword">SIGNAL</span> BCD_S : <span class="built_in">STD_LOGIC_VECTOR</span>(<span class="number">3</span> <span class="keyword">DOWNTO</span> <span class="number">0</span>);	  </span><br><span class="line">	<span class="keyword">BEGIN</span></span><br><span class="line">	U0 : CONTROL <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLR=&gt;CLR,CLK=&gt;CLK,SP=&gt;SP,EN=&gt;E);</span><br><span class="line">	U1 : CB10 <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;CLK,CO=&gt;C);</span><br><span class="line">	U2 : COUNT <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;C,CLR=&gt;CLR,EN=&gt;E,MS_1MS=&gt;MS1,MS_10MS=&gt;MS10,MS_100MS=&gt;MS100,S_1S=&gt;S1,S_10S=&gt;S10,M_1MIN=&gt;MIN1,M_10MIN=&gt;MIN10,HOUR=&gt;HR);</span><br><span class="line">	U3 : MULX <span class="keyword">PORT</span> <span class="keyword">MAP</span>(CLK=&gt;CLK,CLR=&gt;CLR,EN=&gt;E,MS_1MS=&gt;MS1,MS_10MS=&gt;MS10,MS_100MS=&gt;MS100,S_1S=&gt;S1,S_10S=&gt;S10,M_1MIN=&gt;MIN1,M_10MIN=&gt;MIN10,HOUR=&gt;HR,OUTBCD=&gt;BCD_S,SEG=&gt;SEG);</span><br><span class="line">	U4 : BCD7 <span class="keyword">PORT</span> <span class="keyword">MAP</span>(BCD=&gt;BCD_S,LED=&gt;LED);</span><br><span class="line">	CO&lt;=C;</span><br><span class="line">	EN&lt;=E;</span><br><span class="line">	OUTBCD&lt;=BCD_S;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>
<h1 id="实验流程与步骤"><a href="#实验流程与步骤" class="headerlink" title="实验流程与步骤"></a>实验流程与步骤</h1><p>根据系统设计要求, 系统的构成主要由时基分频模块、控制模块、计时模块、显示模块四部分组成，采用自顶向下的方式设计这些模块，系统构成框图如图所示。</p>
<p> (1) 时基分频模块<br>该分频模块就是把系统工作频率分频后当做定时器的工作频率，例如系统时钟为50MHz，50000分频后定时器的工作时钟为1kHz。</p>
<p> (2) 控制模块<br>该功能模块是通过对模块的VHDL 程序编译来生成模块的功能元器件，其中<br>VHDL程序采用状态机描述的方式，状态都采用符号化状态。模块的元器件有三个输入端和一个输出端，其中输入端信号为时钟信号CLK、控制信号SP和复位信号CLR。输入信号SP用于控制计数模块的计时状态，在VHDL程序中设置计时模块有四种状态，分别为s0、s1、s2 和 s3，其中 状态s0是保持态，s1是启动态，s2是计数态，s3是停止态。 输出端为使能信号EN，它是高电平有效。整个程序可分为两个进程来分别描述状态转化机和寄存器操作。在VHDL程序中设置输入信号SP变化时计时模块所对应的状态。通过该设置使得系统可通过控制输入信号SP的值来决定计时模块所处的状态。</p>
<p>（3）计时模块<br>计时模块共需要2个六进制计数器和6个十进制计数器。其中六进制计数器和十进制计数器的描述方法几乎完全一样。考虑到级联的需要，两个计时器除了时钟输入CLK和异步清零CLR之外，另外设计了计数使能输入端EN，该使能端用于控制计时模块是否工作。</p>
<p>（4）显示模块<br>数据选择的作用是为了选择计时模块每个位置的数字，并将其对应的数字输出，并设置一个位置标志位来显示输出数字为计时数据的哪一位。显示模块用于显示数据选择器输出端BCD的数据，该显示模块采用的是七段译码器的编译码规则，将ASCII 数据转化为对应的七段译码器数据。计时显示电路的实现方案采用扫描显示，即每次只驱动一位数码管，各位数据轮流驱动对应的数码管进行显示。</p>
<p><img src="block.png" alt="系统构成框图"></p>
<h1 id="实验结果与分析"><a href="#实验结果与分析" class="headerlink" title="实验结果与分析"></a>实验结果与分析</h1><p>数字秒表系统各个模块及整体仿真图如下：</p>
<p>（1）时基分频模块仿真</p>
<p><img src="CB10.png" alt="时基分频模块仿真图"></p>
<p>CLK是时钟脉冲输入端，CO为分频后信号输出端。由FPGA器件内部50mHZ的时钟脉冲产生秒表需要的1kHZ时钟频率，需要对50mHZ进行50000分频。</p>
<p>（2）控制模块仿真</p>
<p>控制模块采用高效的状态机控制，模块有四种状态，分别为s0、s1、s2 和 s3，其中 状态s0是保持态，s1是启动态，s2是计数态，s3是停止态。异步清零，秒表在任何时候都能执行清零操作，SP来控制秒表的开始或关闭。</p>
<p><img src="CONTROL.png" alt="控制模块仿真图"></p>
<p>（3）计时模块仿真</p>
<p>①十进制计数器仿真</p>
<p><img src="CDU10.png" alt="十进制计数器仿真图"></p>
<p>图中可以看出十进制计数器的计数功能正常，从0计到9后回0，清零时立即从0开始计时。</p>
<p>②六进制计数器仿真</p>
<p><img src="CDU6.png" alt="六进制计数器仿真图"></p>
<p>图中可以看出六进制计数器的计数功能正常，从0计到5后回0，清零时立即从0开始计时。</p>
<p>③计时器仿真</p>
<p><img src="COUNT.png" alt="计时器仿真图"></p>
<p>计时器功能正常，能够准确计时ms、10ms、100ms、1s、10s、1min、10min、hour位。</p>
<p>（4）显示模块仿真</p>
<p>①数据选择器仿真</p>
<p>数据选择模块选择计时模块每个位置的数字，并将其对应的数字输出，并设置一个位置标志位来显示输出数字为计时数据的哪一位。</p>
<p><img src="MULX.png" alt="数据选择器仿真图"></p>
<p>②BCD七段译码器仿真</p>
<p><img src="BCD7.png" alt="BCD七段译码器仿真图"></p>
<p>（5）秒表系统仿真</p>
<p><img src="STOPWATCH.png" alt="秒表系统仿真图"></p>
<p>秒表系统仿真正常，从ms位到hour位依次刷新扫描，百进制和六十进制正常，异步清零复位正常，系统整体运行良好。由仿真结果可以看出系统具有计时和显示功能，且满足计时精度为10ms，计时范围为0 ～ 59 分 59.99 秒的设计要求，同时计时稳定性高。</p>
<h1 id="实验体会"><a href="#实验体会" class="headerlink" title="实验体会"></a>实验体会</h1><p>VHDL作为一种标准硬件描述语言，它除了含有许多具有硬件特征的语句外，其语言形式和描述风格与句法类似一般的计算机高级语言。VHDL有着与其它语言截然不同的地方，那就是它的互动性很强。因为语言的复杂，老师想要教会我们去用这门语言，光是看书或者PPT是不够的，那样在脑海中的印象并不深刻，所以老师让我们尽量带自己的电脑去上课，在课堂上可以跟着老师一起做。 </p>
<p>通过这次课程设计，我了解到了一些自身的不足：对于模块功能想象力不足，模块设计也总是错误百出，粗心大意是永远会出现的。一开始，感觉数字秒表的功能模块应该很清晰，模块之间的联系很密切，同时，觉得自己对于这种简易电子设备的内部结构应该很熟悉。可是，到了真正操作的时候才发现自己想得太简单了。虽然数字秒表就是些简单的计数器的综合，但是每个计数器的设计也是需要懂很多知识的。而且秒表有复位功能，要考虑到复位时同步清零，清零后还要保持在零的状态，清零是用户进行的操纵，需要有外部输入，又要想暂停、启动的控制，这样就需要状态机的模块进行使能端、清零端的状态转换。这些虽然只是细枝末节，但是真正的编程的成功因素很大一部分都是取决于这些细节。</p>
<h1 id="附录-VERILOG"><a href="#附录-VERILOG" class="headerlink" title="附录(VERILOG)"></a>附录(VERILOG)</h1><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line">CB10<span class="variable">.v</span></span><br><span class="line"><span class="keyword">module</span> CB10(clk,co);</span><br><span class="line">	<span class="keyword">input</span> clk;</span><br><span class="line">	<span class="keyword">output</span> co;</span><br><span class="line">	<span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] cnter;</span><br><span class="line">	<span class="keyword">reg</span> co;</span><br><span class="line">	<span class="keyword">always</span>@(<span class="keyword">posedge</span> clk)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">if</span> (cnter==<span class="number">4&#x27;b1001</span>) </span><br><span class="line">			<span class="keyword">begin</span></span><br><span class="line">			cnter = <span class="number">0</span>;</span><br><span class="line">			co = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">begin</span></span><br><span class="line">			cnter = cnter + <span class="number">1</span>;</span><br><span class="line">			co = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line">			</span><br><span class="line">CONTROL<span class="variable">.v</span></span><br><span class="line"><span class="keyword">module</span> CONTROL(clk,rst,sp,en);</span><br><span class="line">	<span class="keyword">input</span> clk,rst,sp;</span><br><span class="line">	<span class="keyword">output</span> en;</span><br><span class="line">	<span class="keyword">reg</span> en;</span><br><span class="line">	<span class="keyword">parameter</span> s0=<span class="number">0</span>,s1=<span class="number">1</span>,s2=<span class="number">2</span>,s3=<span class="number">3</span>;</span><br><span class="line">	<span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] c_st,n_st;</span><br><span class="line">	<span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">if</span>(rst)</span><br><span class="line">			c_st = s0;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			c_st = n_st;</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">always</span>@(c_st,sp)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">case</span>(c_st)</span><br><span class="line">			s0:<span class="keyword">begin</span> en = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">if</span>(sp==<span class="number">1</span>)</span><br><span class="line">					n_st = s1;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					n_st = s0; <span class="keyword">end</span>		</span><br><span class="line">			s1:<span class="keyword">begin</span> en = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">if</span>(sp==<span class="number">1</span>)</span><br><span class="line">					n_st = s1;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					n_st = s2; <span class="keyword">end</span></span><br><span class="line">			s2:<span class="keyword">begin</span> en = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">if</span>(sp==<span class="number">1</span>)</span><br><span class="line">					n_st = s3;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					n_st = s2; <span class="keyword">end</span></span><br><span class="line">			s0:<span class="keyword">begin</span> en = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">if</span>(sp==<span class="number">1</span>)</span><br><span class="line">					n_st = s3;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					n_st = s0; <span class="keyword">end</span></span><br><span class="line">			<span class="keyword">endcase</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line">	</span><br><span class="line">CDU10<span class="variable">.v</span></span><br><span class="line"><span class="keyword">module</span> CDU10(clk,rst,en,cn,count10);</span><br><span class="line">	<span class="keyword">input</span> clk,rst,en;</span><br><span class="line">	<span class="keyword">output</span> cn;</span><br><span class="line">	<span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] count10;</span><br><span class="line">	<span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] count;</span><br><span class="line">	<span class="keyword">reg</span> cn;</span><br><span class="line">	<span class="keyword">assign</span> count10 = count;</span><br><span class="line">	<span class="keyword">always</span>@(<span class="keyword">posedge</span> clk,<span class="keyword">posedge</span> rst)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">if</span>(rst) <span class="keyword">begin</span></span><br><span class="line">			count = <span class="number">0</span>;</span><br><span class="line">			cn = <span class="number">0</span>; <span class="keyword">end</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(en) <span class="keyword">begin</span></span><br><span class="line">			<span class="keyword">if</span>(count==<span class="number">4&#x27;b1001</span>) <span class="keyword">begin</span></span><br><span class="line">				cn = <span class="number">1</span>;</span><br><span class="line">				count = <span class="number">0</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">				cn = <span class="number">0</span>;</span><br><span class="line">				count = count+<span class="number">1</span>; <span class="keyword">end</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line">				</span><br><span class="line">CDU6<span class="variable">.v</span></span><br><span class="line"><span class="keyword">module</span> CDU6(clk,rst,en,cn,count6);</span><br><span class="line">	<span class="keyword">input</span> clk,rst,en;</span><br><span class="line">	<span class="keyword">output</span> cn;</span><br><span class="line">	<span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] count6;</span><br><span class="line">	<span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] count;</span><br><span class="line">	<span class="keyword">reg</span> cn;</span><br><span class="line">	<span class="keyword">assign</span> count6 = count;</span><br><span class="line">	<span class="keyword">always</span>@(<span class="keyword">posedge</span> clk,<span class="keyword">posedge</span> rst)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">if</span>(rst) <span class="keyword">begin</span></span><br><span class="line">			count = <span class="number">0</span>;</span><br><span class="line">			cn = <span class="number">0</span>; <span class="keyword">end</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(en) <span class="keyword">begin</span></span><br><span class="line">			<span class="keyword">if</span>(count==<span class="number">4&#x27;b0101</span>) <span class="keyword">begin</span></span><br><span class="line">				cn = <span class="number">1</span>;</span><br><span class="line">				count = <span class="number">0</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">				cn = <span class="number">0</span>;</span><br><span class="line">				count = count+<span class="number">1</span>; <span class="keyword">end</span></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line">				</span><br><span class="line">TIMER<span class="variable">.v</span></span><br><span class="line"><span class="keyword">module</span> TIMER(clk,rst,en,ms1,ms10,ms100,s1,s10,m1,m10,hour);</span><br><span class="line">	<span class="keyword">input</span> clk,rst,en;</span><br><span class="line">	<span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] ms1,ms10,ms100,s1,s10,m1,m10,hour;</span><br><span class="line">	<span class="keyword">wire</span> a,b,c,d,e,f,g,h;</span><br><span class="line">	CDU10 u1(clk,rst,en,a,ms1);</span><br><span class="line">	CDU10 u2(a,rst,en,b,ms10);</span><br><span class="line">	CDU10 u3(b,rst,en,c,ms100);</span><br><span class="line">	CDU10 u4(c,rst,en,d,s1);</span><br><span class="line">	CDU6 u5(d,rst,en,e,s10);</span><br><span class="line">	CDU10 u6(e,rst,en,f,m1);</span><br><span class="line">	CDU6 u7(f,rst,en,g,m10);</span><br><span class="line">	CDU10 u8(g,rst,en,h,hour);</span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br><span class="line">MUXL<span class="variable">.v</span></span><br><span class="line"><span class="keyword">module</span> MUXL(clk,rst,en,ms1,ms10,ms100,s1,s10,m1,m10,hour,bcd,seg);</span><br><span class="line">	<span class="keyword">input</span> clk,rst,en;</span><br><span class="line">	<span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] ms1,ms10,ms100,s1,s10,m1,m10,hour;</span><br><span class="line">	<span class="keyword">output</span> [<span class="number">3</span>:<span class="number">0</span>] bcd;</span><br><span class="line">	<span class="keyword">output</span> [<span class="number">7</span>:<span class="number">0</span>] seg;</span><br><span class="line">	<span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>] count,bcd;</span><br><span class="line">	<span class="keyword">reg</span> [<span class="number">7</span>:<span class="number">0</span>] seg;</span><br><span class="line">	<span class="keyword">always</span>@(<span class="keyword">posedge</span> clk,<span class="keyword">posedge</span> rst)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">if</span>(rst)</span><br><span class="line">			count = <span class="number">4&#x27;b1111</span>;</span><br><span class="line">		<span class="keyword">else</span> </span><br><span class="line">			<span class="keyword">if</span>(en) <span class="keyword">begin</span></span><br><span class="line">				<span class="keyword">if</span> (count==<span class="number">4&#x27;b0111</span>)</span><br><span class="line">					count = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					count = count + <span class="number">1</span>; <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">always</span>@(<span class="keyword">posedge</span> clk)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">case</span>(count)</span><br><span class="line">			<span class="number">4&#x27;b0000</span>:<span class="keyword">begin</span> bcd = ms1;seg = <span class="number">8&#x27;b11111110</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="number">4&#x27;b0001</span>:<span class="keyword">begin</span> bcd = ms10;seg = <span class="number">8&#x27;b11111101</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="number">4&#x27;b0010</span>:<span class="keyword">begin</span> bcd = ms100;seg = <span class="number">8&#x27;b11111011</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="number">4&#x27;b0011</span>:<span class="keyword">begin</span> bcd = s1;seg = <span class="number">8&#x27;b11110111</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="number">4&#x27;b0100</span>:<span class="keyword">begin</span> bcd = s10;seg = <span class="number">8&#x27;b11101111</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="number">4&#x27;b0101</span>:<span class="keyword">begin</span> bcd = m1;seg = <span class="number">8&#x27;b11011111</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="number">4&#x27;b0110</span>:<span class="keyword">begin</span> bcd = m10;seg = <span class="number">8&#x27;b10111111</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="number">4&#x27;b0111</span>:<span class="keyword">begin</span> bcd = hour;seg = <span class="number">8&#x27;b01111111</span>; <span class="keyword">end</span></span><br><span class="line">			<span class="keyword">default</span>:<span class="keyword">begin</span> bcd = <span class="number">4&#x27;b0000</span>;seg = <span class="number">8&#x27;b0000000</span>; <span class="keyword">end</span></span><br><span class="line">		<span class="keyword">endcase</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line">				</span><br><span class="line">BCD7<span class="variable">.v</span></span><br><span class="line"><span class="keyword">module</span> BCD7(bcd,led);</span><br><span class="line">	<span class="keyword">input</span> [<span class="number">3</span>:<span class="number">0</span>] bcd;</span><br><span class="line">	<span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] led;</span><br><span class="line">	<span class="keyword">reg</span> [<span class="number">6</span>:<span class="number">0</span>] led;</span><br><span class="line">	<span class="keyword">always</span>@(*) <span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">case</span>(bcd)</span><br><span class="line">			<span class="number">4&#x27;b0000</span>:led = <span class="number">7&#x27;b1111110</span>;</span><br><span class="line">			<span class="number">4&#x27;b0001</span>:led = <span class="number">7&#x27;b0110000</span>;</span><br><span class="line">			<span class="number">4&#x27;b0010</span>:led = <span class="number">7&#x27;b1101101</span>;</span><br><span class="line">			<span class="number">4&#x27;b0011</span>:led = <span class="number">7&#x27;b1111001</span>;</span><br><span class="line">			<span class="number">4&#x27;b0100</span>:led = <span class="number">7&#x27;b0110011</span>;</span><br><span class="line">			<span class="number">4&#x27;b0101</span>:led = <span class="number">7&#x27;b1011011</span>;</span><br><span class="line">			<span class="number">4&#x27;b0110</span>:led = <span class="number">7&#x27;b1011111</span>;</span><br><span class="line">			<span class="number">4&#x27;b0111</span>:led = <span class="number">7&#x27;b1110000</span>;</span><br><span class="line">			<span class="number">4&#x27;b1000</span>:led = <span class="number">7&#x27;b1111111</span>;</span><br><span class="line">			<span class="number">4&#x27;b1001</span>:led = <span class="number">7&#x27;b1111011</span>;</span><br><span class="line">			<span class="keyword">default</span>:led = <span class="number">7&#x27;b0000000</span>;</span><br><span class="line">		<span class="keyword">endcase</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line">		</span><br><span class="line">Stopwatch<span class="variable">.v</span></span><br><span class="line"><span class="keyword">module</span> SPWATCH(clk,rst,sp,co,led,seg);</span><br><span class="line">	<span class="keyword">input</span> sp,rst,clk;</span><br><span class="line">	<span class="keyword">output</span> co;</span><br><span class="line">	<span class="keyword">output</span> [<span class="number">6</span>:<span class="number">0</span>] led;</span><br><span class="line">	<span class="keyword">output</span> [<span class="number">7</span>:<span class="number">0</span>] seg;</span><br><span class="line">	<span class="keyword">wire</span> c,e;</span><br><span class="line">	<span class="keyword">wire</span> [<span class="number">3</span>:<span class="number">0</span>] ms1,ms2,ms3,s1,s2,m1,m2,hr,bcd4;</span><br><span class="line">	CONTROL u1(clk,rst,sp,e);</span><br><span class="line">	CB10 u2(clk,c);</span><br><span class="line">	TIMER u3(c,rst,e,ms1,ms2,ms3,s1,s2,m1,m2,hr);</span><br><span class="line">	MUXL u4(clk,rst,e,ms1,ms2,ms3,s1,s2,m1,m2,hr,bcd4,seg);</span><br><span class="line">	BCD7 u5(bcd4,led);</span><br><span class="line">	<span class="keyword">assign</span> co = c;</span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>


</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">gzwang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://gzwangu.github.io/2020/01/19/基于VHDL的数字秒表设计/">https://gzwangu.github.io/2020/01/19/基于VHDL的数字秒表设计/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://gzwangu.github.io">Rubina の blog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/HDL/">HDL</a><a class="post-meta__tags" href="/tags/FPGA/">FPGA</a><a class="post-meta__tags" href="/tags/VHDL/">VHDL</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E5%AD%97%E7%A7%92%E8%A1%A8/">数字秒表</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/04/25/uCOS-II%E5%AE%9E%E9%AA%8C/"><i class="fa fa-chevron-left">  </i><span>uCOS-II实验</span></a></div><div class="next-post pull-right"><a href="/2020/01/17/%E5%9F%BA%E4%BA%8E%E5%8D%95%E7%89%87%E6%9C%BA%E7%9A%84%E5%8F%8C%E6%9C%BA%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"><span>基于单片机的双机通信系统设计</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2021 By gzwang</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>